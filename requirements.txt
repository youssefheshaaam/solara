# SOLARA E-Commerce Website Requirements
# Full-Stack Application with Node.js, Express, and MongoDB

================================================================================
## PROJECT OVERVIEW
================================================================================

This is a full-stack e-commerce web application featuring:
- MVC Architecture with Express.js
- EJS Server-Side Rendering
- MongoDB database with Mongoose ODM
- JWT + Session-based Authentication
- RESTful API with AJAX/Fetch
- File uploads with Multer
- Frontend + Backend Validation
- Localization (English/Arabic)
- Pagination support

================================================================================
## SYSTEM REQUIREMENTS
================================================================================

### Required Software:
- Node.js 18.x or higher (https://nodejs.org/)
- MongoDB 6.x or higher (https://www.mongodb.com/try/download/community)
- npm 9.x or higher (comes with Node.js)

### Browser Requirements:
- Modern browser (Chrome 90+, Firefox 88+, Safari 14+, Edge 90+)
- JavaScript enabled
- Cookies enabled

================================================================================
## BACKEND DEPENDENCIES (server/package.json)
================================================================================

### Core Framework:
- express@4.18.2          - Web framework for Node.js
- mongoose@8.0.3          - MongoDB object modeling

### Templating:
- ejs@3.1.10              - Embedded JavaScript templating engine (Server-Side Rendering)

### Authentication & Security:
- bcryptjs@2.4.3          - Password hashing
- jsonwebtoken@9.0.2      - JWT token generation/verification
- express-session@1.17.3  - Session management
- connect-mongo@5.1.0     - MongoDB session store
- helmet@7.1.0            - Security headers
- cors@2.8.5              - Cross-Origin Resource Sharing

### Validation & Utilities:
- express-validator@7.0.1 - Request validation
- dotenv@16.3.1           - Environment variables
- cookie-parser@1.4.6     - Cookie parsing

### File Upload:
- multer@1.4.5-lts.1      - File upload handling
- sharp@0.33.1            - Image processing (optional)

### Localization:
- i18n@0.15.1             - Internationalization

### Logging:
- morgan@1.10.0           - HTTP request logger

### Development:
- nodemon@3.0.2           - Auto-restart on changes

================================================================================
## INSTALLATION INSTRUCTIONS
================================================================================

### Step 1: Install MongoDB
Download and install MongoDB Community Edition from:
https://www.mongodb.com/try/download/community

Or use MongoDB Atlas (cloud): https://www.mongodb.com/atlas

### Step 2: Install Node.js Dependencies
```bash
cd server
npm install
```

### Step 3: Configure Environment (Optional)
Create server/.env file:
```
PORT=5000
NODE_ENV=development
MONGODB_URI=mongodb://localhost:27017/solara_store
SESSION_SECRET=your-secret-key
JWT_SECRET=your-jwt-secret
JWT_EXPIRES_IN=7d
MAX_FILE_SIZE=5242880
```

### Step 4: Start MongoDB Service
Windows: MongoDB should run as a service automatically
macOS/Linux: 
```bash
mongod --dbpath /data/db
```

### Step 5: Run the Server
```bash
cd server
npm run dev     # Development with auto-reload
# or
npm start       # Production
```

The server will start at: http://localhost:5000

================================================================================
## API ENDPOINTS
================================================================================

### Authentication:
POST   /api/auth/register     - Register new user
POST   /api/auth/login        - Login user
POST   /api/auth/admin/login  - Admin login
POST   /api/auth/logout       - Logout user
GET    /api/auth/me           - Get current user
GET    /api/auth/check        - Check auth status
POST   /api/auth/refresh     - Refresh JWT token
PUT    /api/auth/change-password - Change password

### Products (CRUD):
GET    /api/products          - Get all products (with pagination)
GET    /api/products/:id      - Get single product
GET    /api/products/slug/:slug - Get product by slug
GET    /api/products/featured - Get featured products
GET    /api/products/new-arrivals - Get new arrivals
GET    /api/products/category/:category - Get by category
GET    /api/products/search   - Search products
GET    /api/products/admin/stats - Get product statistics (Admin)
POST   /api/products          - Create product (Admin)
PUT    /api/products/:id      - Update product (Admin)
DELETE /api/products/:id      - Delete product (Admin)

### Users (CRUD):
GET    /api/users             - Get all users (Admin)
GET    /api/users/stats       - Get user statistics (Admin)
GET    /api/users/:id         - Get user profile
PUT    /api/users/:id         - Update profile (owner)
PUT    /api/users/:id/admin   - Update user (Admin)
DELETE /api/users/:id         - Delete user (Admin)
POST   /api/users/:id/addresses - Add address
PUT    /api/users/:id/addresses/:addressId - Update address
DELETE /api/users/:id/addresses/:addressId - Delete address
POST   /api/users/:id/wishlist - Add to wishlist
DELETE /api/users/:id/wishlist/:productId - Remove from wishlist

### Orders (CRUD):
GET    /api/orders            - Get all orders (Admin)
GET    /api/orders/admin/stats - Get order statistics (Admin)
GET    /api/orders/my-orders  - Get user's orders
GET    /api/orders/number/:orderNumber - Get order by order number
GET    /api/orders/:id        - Get single order
POST   /api/orders            - Create order
PUT    /api/orders/:id/status - Update order status (Admin)
PUT    /api/orders/:id/cancel - Cancel order

### Cart:
GET    /api/cart              - Get user's cart
POST   /api/cart              - Add to cart
POST   /api/cart/sync         - Sync cart with local storage
POST   /api/cart/coupon       - Apply coupon code
DELETE /api/cart/coupon       - Remove coupon code
PUT    /api/cart/:productId   - Update cart item
DELETE /api/cart/:productId   - Remove from cart
DELETE /api/cart              - Clear cart

### Localization:
GET    /api/locales/:lang     - Get translations (en/ar)
POST   /api/set-language      - Set language preference

================================================================================
## PROJECT STRUCTURE
================================================================================

server/
├── app.js                 # Main application entry
├── package.json           # Dependencies
├── .env                   # Environment variables
├── config/
│   └── db.js             # Database configuration
├── controllers/           # Route handlers (Business Logic)
│   ├── authController.js
│   ├── productController.js
│   ├── userController.js
│   ├── orderController.js
│   ├── cartController.js
│   └── frontendController.js  # EJS page rendering
├── middleware/            # Custom middleware
│   ├── auth.js           # Authentication middleware
│   ├── errorHandler.js   # Error handling
│   ├── upload.js         # File upload (Multer)
│   ├── validation.js     # Request validation
│   └── optionalAuth.js   # Optional authentication for EJS pages
├── models/                # Mongoose schemas
│   ├── User.js
│   ├── Product.js
│   ├── Order.js
│   └── Cart.js
├── routes/                # API routes + Frontend routes
│   ├── auth.js
│   ├── products.js
│   ├── users.js
│   ├── orders.js
│   ├── cart.js
│   └── frontend.js       # EJS page routes
├── views/                 # EJS templates (Server-Side Rendering)
│   ├── pages/            # Main page templates
│   │   ├── index.ejs
│   │   ├── men.ejs
│   │   ├── women.ejs
│   │   ├── product.ejs
│   │   ├── cart.ejs
│   │   ├── checkout.ejs
│   │   ├── orders.ejs
│   │   ├── profile.ejs
│   │   ├── wishlist.ejs
│   │   └── search.ejs
│   ├── partials/         # Reusable components
│   │   ├── head.ejs
│   │   ├── nav.ejs
│   │   └── footer.ejs
│   ├── auth/             # Authentication pages
│   │   ├── login.ejs
│   │   └── register.ejs
│   └── 404.ejs           # Error page
│
│ Note: Admin dashboard is served as static HTML from /admin/admin.html
├── locales/               # i18n translations
│   ├── en.json
│   └── ar.json
└── uploads/               # Uploaded files
    ├── products/
    └── avatars/

================================================================================
## FEATURES CHECKLIST
================================================================================

[x] MVC Architecture & Routing (10 pts)
[x] Authentication - JWT + Sessions + bcrypt (10 pts)
[x] Sessions - express-session + connect-mongo (10 pts)
[x] File Upload - Multer middleware (5 pts)
[x] Error Handling - Custom error middleware (5 pts)
[x] Data Validation - Frontend + Backend (10 pts)
[x] CRUD Operations - Users, Products, Orders, Cart (15 pts)
[x] AJAX/Fetch - API integration (5 pts)
[x] UI/UX + Responsive - Existing frontend (5 pts)
[x] Innovation - Modern stack, security features (5 pts)

BONUS:
[x] Localization - English/Arabic support (5 pts)
[x] Pagination - Products and Orders (5 pts)

================================================================================
## TESTING
================================================================================

### Test API with cURL:
```bash
# Health check
curl http://localhost:5000/api/health

# Register user
curl -X POST http://localhost:5000/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"firstName":"Test","lastName":"User","email":"test@example.com","password":"Test@123"}'

# Login
curl -X POST http://localhost:5000/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"email":"test@example.com","password":"Test@123"}'

# Get products
curl http://localhost:5000/api/products
```

### Test with Postman/Insomnia:
Import the API endpoints above and test each route.

================================================================================
## NOTES
================================================================================

- Default admin credentials need to be set via database seeding
- Passwords are hashed with bcrypt (12 rounds)
- JWT tokens expire in 7 days by default
- Sessions stored in MongoDB with 24-hour TTL
- File uploads limited to 5MB per file
- Maximum 5 images per product upload
