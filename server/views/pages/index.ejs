<%- include('../partials/head.ejs', { title: typeof title !== 'undefined' ? title : 'SOLARA - Modern Minimal Luxury' }) %>

<%- include('../partials/nav.ejs', { currentPage: 'home' }) %>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-bg-container">
            <img src="/images/hero-main.jpg" alt="Modern Fashion Hero" class="hero-bg-image" onerror="this.style.display='none'">
            <div class="hero-overlay">
                <div class="container">
                    <div class="hero-content">
                        <div class="hero-tagline display-heading"><%= typeof __ !== 'undefined' ? __("home.discover") : 'DISCOVER' %></div>
                        <div class="hero-tagline-sub display-heading"><%= typeof __ !== 'undefined' ? __("home.yourStyle") : 'YOUR STYLE' %></div>
                        <p><%= typeof __ !== 'undefined' ? __("home.heroDescription") : 'Curated essentials that define contemporary style. Where minimal meets luxury, and every piece tells a story.' %></p>
                        <a href="#featured" class="btn btn-outline-light btn-lg"><%= typeof __ !== 'undefined' ? __("home.shopCollection") : 'SHOP COLLECTION' %></a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Journey Link -->
        <div class="hero-journey">
            <a href="#gender-section"><%= typeof __ !== 'undefined' ? __("home.exploreCollections") : 'Explore Collections' %> <i class="fas fa-chevron-down"></i></a>
        </div>
    </section>

    <!-- Gender Split Section -->
    <section class="gender-section" id="gender-section">
        <div class="gender-side" onclick="window.location.href='/men'">
            <img src="/images/Men.png" alt="Men's Collection" onerror="this.style.background='#1C1C1C'">
            <div class="gender-overlay">
                <h2 class="gender-label display-heading"><%= typeof __ !== 'undefined' ? __("home.men") : 'MEN' %></h2>
                <p class="gender-description"><%= typeof __ !== 'undefined' ? __("home.menDescription") : 'Discover essential pieces that embody confidence and refinement — crafted for the modern man.' %></p>
                <a href="/men" class="btn btn-outline-light gender-btn"><%= typeof __ !== 'undefined' ? __("home.exploreCollection") : 'Explore Collection' %></a>
            </div>
        </div>
        <div class="gender-side" onclick="window.location.href='/women'">
            <img src="/images/Women.png" alt="Women's Collection" onerror="this.style.background='#EADBC8'">
            <div class="gender-overlay">
                <h2 class="gender-label display-heading"><%= typeof __ !== 'undefined' ? __("home.women") : 'WOMEN' %></h2>
                <p class="gender-description"><%= typeof __ !== 'undefined' ? __("home.womenDescription") : 'Discover captivating styles that embody grace, strength and allure — crafted for the modern woman.' %></p>
                <a href="/women" class="btn btn-outline-light gender-btn"><%= typeof __ !== 'undefined' ? __("home.exploreCollection") : 'Explore Collection' %></a>
            </div>
        </div>
    </section>

    <!-- Featured Collections Section -->
    <section class="featured-collections">
        <div class="container">
            <div class="section-header">
                <h2><%= typeof __ !== 'undefined' ? __("home.featuredCollections") : 'Featured Collections' %></h2>
                <p><%= typeof __ !== 'undefined' ? __("home.discoverPopular") : 'Discover our most popular styles' %></p>
            </div>
            <div class="collections-grid">
                <div class="collection-card">
                    <div class="collection-image">
                        <img src="/images/Men.png" alt="Men's Collection" onerror="this.parentElement.style.background='#f5f5f5'">
                        <div class="collection-overlay">
                            <a href="/men" class="btn btn-outline-light"><%= typeof __ !== 'undefined' ? __("home.shopMen") : 'Shop Men' %></a>
                        </div>
                    </div>
                    <div class="collection-content">
                        <h3><%= typeof __ !== 'undefined' ? __("home.mensCollection") : "Men's Collection" %></h3>
                        <p><%= typeof __ !== 'undefined' ? __("home.mensEssentials") : 'Essential pieces for the modern man' %></p>
                    </div>
                </div>
                <div class="collection-card">
                    <div class="collection-image">
                        <img src="/images/Women.png" alt="Women's Collection" onerror="this.parentElement.style.background='#f5f5f5'">
                        <div class="collection-overlay">
                            <a href="/women" class="btn btn-outline-light"><%= typeof __ !== 'undefined' ? __("home.shopWomen") : 'Shop Women' %></a>
                        </div>
                    </div>
                    <div class="collection-content">
                        <h3><%= typeof __ !== 'undefined' ? __("home.womensCollection") : "Women's Collection" %></h3>
                        <p><%= typeof __ !== 'undefined' ? __("home.womensElegance") : 'Timeless elegance meets contemporary style' %></p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Brand Story Section -->
    <section class="brand-story">
        <div class="container">
            <div class="brand-content">
                <div class="brand-text">
                    <h2><%= typeof __ !== 'undefined' ? __("home.ourStory") : 'Our Story' %></h2>
                    <p><%= typeof __ !== 'undefined' ? __("home.storyText1") : 'SOLARA was born from a simple belief: that great style should be accessible, sustainable, and effortless. We curate pieces that transcend trends, focusing on quality, comfort, and timeless design.' %></p>
                    <p><%= typeof __ !== 'undefined' ? __("home.storyText2") : 'Every item in our collection is carefully selected to represent the perfect balance between minimalism and luxury, creating a wardrobe that works for every occasion.' %></p>
                    <a href="/contact" class="btn btn-primary"><%= typeof __ !== 'undefined' ? __("home.learnMore") : 'Learn More' %></a>
                </div>
                <div class="brand-image">
                    <img src="/images/products/1W2A4118_2.jpg" alt="Brand Story" onerror="this.style.display='none'">
                </div>
            </div>
        </div>
    </section>

    <!-- New Arrivals Section -->
    <section class="products-section">
        <div class="container">
            <h2 class="section-title"><%= typeof __ !== 'undefined' ? __("home.newArrivals") : "New Arrivals" %></h2>
            <p class="text-center" style="margin-bottom: 2rem; color: #666;"><%= typeof __ !== 'undefined' ? __("home.newArrivalsDescription") : "Fresh styles just added to our collection" %></p>
            <div class="products-grid" id="new-arrivals-grid">
                <% if (typeof newArrivals !== 'undefined' && newArrivals.length > 0) { %>
                    <% newArrivals.slice(0, 8).forEach(product => { %>
                        <div class="product-card" data-product-id="<%= product._id %>">
                            <div class="product-image">
                                <% if (product.comparePrice) { %>
                                    <div class="sale-badge"><%= typeof __ !== 'undefined' ? __("home.sale") : "SALE" %></div>
                                <% } %>
                                <img src="<%= product.imageUrl %>" alt="<%= product.name %>" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <div class="image-placeholder" style="display:none;">
                                    <i class="fas fa-image"></i>
                                </div>
                            </div>
                            <div class="product-card-content">
                                <p class="category"><%= product.category.charAt(0).toUpperCase() + product.category.slice(1) %></p>
                                <h3><%= product.name %></h3>
                                <p class="price">EGP <%= product.price.toFixed(2) %></p>
                                <div class="product-actions">
                                    <button class="btn btn-primary btn-add-to-cart" data-product-id="<%= product._id %>">
                                        <i class="fas fa-shopping-cart"></i>
                                        <%= typeof __ !== 'undefined' ? __("home.addToCart") : "Add to Cart" %>
                                    </button>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p class="text-center"><%= typeof __ !== 'undefined' ? __("home.noNewArrivals") : "No new arrivals at the moment. Check back soon!" %></p>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Sale Banner Section -->
    <section class="sale-banner">
        <div class="sale-gif-container">
            <img src="/images/Sale.gif" alt="Sale Animation" class="sale-gif" onerror="this.style.display='none'">
            <div class="sale-overlay">
                <div class="sale-text">
                    <h2 class="display-heading"><%= typeof __ !== 'undefined' ? __("home.massiveSavings") : "MASSIVE SAVINGS" %></h2>
                    <p><%= typeof __ !== 'undefined' ? __("home.savingsDescription") : "Up to 30% off on selected items" %></p>
                    <a href="#featured" class="btn btn-outline-light"><%= typeof __ !== 'undefined' ? __("home.shopSale") : "SHOP SALE" %></a>
                </div>
            </div>
        </div>
    </section>

    <!-- Featured Products Section -->
    <section id="featured" class="products-section">
        <div class="container">
            <h2 class="section-title"><%= typeof __ !== 'undefined' ? __("home.curatedEssentials") : "Curated Essentials" %></h2>
            <div class="filter-controls">
                <button class="filter-btn active" data-category="all"><%= typeof __ !== 'undefined' ? __("home.all") : "All" %></button>
                <button class="filter-btn" data-category="men"><%= typeof __ !== 'undefined' ? __("nav.men") : "Men" %></button>
                <button class="filter-btn" data-category="women"><%= typeof __ !== 'undefined' ? __("nav.women") : "Women" %></button>
            </div>
            <div class="products-grid" id="products-grid">
                <% if (typeof featuredProducts !== 'undefined' && featuredProducts.length > 0) { %>
                    <% featuredProducts.forEach(product => { %>
                        <div class="product-card" data-product-id="<%= product._id %>">
                            <div class="product-image">
                                <% if (product.comparePrice) { %>
                                    <div class="sale-badge"><%= typeof __ !== 'undefined' ? __("home.sale") : "SALE" %></div>
                                <% } %>
                                <img src="<%= product.imageUrl %>" alt="<%= product.name %>" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <div class="image-placeholder" style="display:none;">
                                    <i class="fas fa-image"></i>
                                </div>
                            </div>
                            <div class="product-card-content">
                                <p class="category"><%= product.category.charAt(0).toUpperCase() + product.category.slice(1) %></p>
                                <h3><%= product.name %></h3>
                                <p class="price">EGP <%= product.price.toFixed(2) %></p>
                                <div class="product-actions">
                                    <button class="btn btn-primary btn-add-to-cart" data-product-id="<%= product._id %>">
                                        <i class="fas fa-shopping-cart"></i>
                                        <%= typeof __ !== 'undefined' ? __("home.addToCart") : "Add to Cart" %>
                                    </button>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p class="text-center"><%= typeof __ !== 'undefined' ? __("home.noFeaturedProducts") : "No featured products at the moment." %></p>
                <% } %>
            </div>
        </div>
    </section>

    <!-- Categories Section -->
    <section class="categories-section">
        <div class="container">
            <h2 class="section-title"><%= typeof __ !== 'undefined' ? __("home.collections") : "Collections" %></h2>
            <div class="categories-grid">
                <div class="category-card" onclick="window.location.href='/men'">
                    <img src="/images/Men.png" alt="Men's Fashion" onerror="this.style.background='#f5f5f5'">
                    <div class="category-overlay">
                        <h3>Men's Collection</h3>
                        <p>Trendy and comfortable clothing</p>
                        <a href="/men" class="btn btn-outline-light">Shop Men</a>
                    </div>
                </div>
                <div class="category-card" onclick="window.location.href='/women'">
                    <img src="/images/Women.png" alt="Women's Fashion" onerror="this.style.background='#f5f5f5'">
                    <div class="category-overlay">
                        <h3>Women's Collection</h3>
                        <p>Elegant and stylish outfits</p>
                        <a href="/women" class="btn btn-outline-light">Shop Women</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Best Sellers Section -->
    <section class="products-section" style="background-color: var(--bg-light);">
        <div class="container">
            <h2 class="section-title"><%= typeof __ !== 'undefined' ? __("home.bestSellersUppercase") : "BEST SELLERS" %></h2>
            <div class="products-grid" id="best-sellers-grid">
                <% if (typeof bestSellers !== 'undefined' && bestSellers.length > 0) { %>
                    <% bestSellers.slice(0, 8).forEach(product => { %>
                        <div class="product-card" data-product-id="<%= product._id %>">
                            <div class="product-image">
                                <% if (product.comparePrice) { %>
                                    <div class="sale-badge"><%= typeof __ !== 'undefined' ? __("home.sale") : "SALE" %></div>
                                <% } %>
                                <img src="<%= product.imageUrl %>" alt="<%= product.name %>" onerror="this.style.display='none'; this.nextElementSibling.style.display='block';">
                                <div class="image-placeholder" style="display:none;">
                                    <i class="fas fa-image"></i>
                                </div>
                            </div>
                            <div class="product-card-content">
                                <p class="category"><%= product.category.charAt(0).toUpperCase() + product.category.slice(1) %></p>
                                <h3><%= product.name %></h3>
                                <p class="price">EGP <%= product.price.toFixed(2) %></p>
                                <div class="product-actions">
                                    <button class="btn btn-primary btn-add-to-cart" data-product-id="<%= product._id %>">
                                        <i class="fas fa-shopping-cart"></i>
                                        <%= typeof __ !== 'undefined' ? __("home.addToCart") : "Add to Cart" %>
                                    </button>
                                </div>
                            </div>
                        </div>
                    <% }); %>
                <% } else { %>
                    <p class="text-center"><%= typeof __ !== 'undefined' ? __("home.noBestSellers") : "No best sellers at the moment." %></p>
                <% } %>
            </div>
            <div class="text-center" style="margin-top: 2rem;">
                <a href="#featured" class="btn btn-outline"><%= typeof __ !== 'undefined' ? __("home.viewAll") : "View All" %></a>
            </div>
        </div>
    </section>

<%- include('../partials/footer.ejs') %>

<style>
    /* Make product cards clickable */
    .product-card {
        cursor: pointer;
        transition: transform 0.2s ease;
    }
    
    .product-card:hover {
        transform: translateY(-4px);
    }
</style>

<script>
    // Setup product card click handlers for server-rendered products
    document.addEventListener('DOMContentLoaded', function() {
        // Use event delegation for product cards (works for both server-rendered and AJAX-loaded)
        document.addEventListener('click', function(e) {
            const productCard = e.target.closest('.product-card');
            if (productCard && !e.target.closest('button') && !e.target.closest('.btn')) {
                const productId = productCard.dataset.productId;
                if (productId) {
                    window.location.href = `/product/${productId}`;
                }
            }
        });
        
        // Also call the existing function if available (for AJAX-loaded products)
        if (typeof setupProductCardEvents === 'function') {
            setupProductCardEvents();
        }
    });
</script>

