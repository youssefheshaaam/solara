<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - SOLARA</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/admin.css">
    <link rel="stylesheet" href="/css/forms.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Inter', sans-serif; background: #f5f7fa; min-height: 100vh; }
        .admin-main { padding: 2rem; min-height: 100vh; }
        .page-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem; }
        .page-header h1 { font-size: 1.75rem; color: #1a1a2e; }
        .stats-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 1.5rem; margin-bottom: 2rem; }
        @media (max-width: 1200px) { .stats-grid { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 600px) { .stats-grid { grid-template-columns: 1fr; } }
        .stat-card { background: white; border-radius: 16px; padding: 1.5rem; display: flex; align-items: center; gap: 1rem; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
        .stat-icon { width: 56px; height: 56px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem; }
        .stat-icon.products { background: #e8f4fd; color: #2196f3; }
        .stat-icon.orders { background: #fff4e5; color: #ff9800; }
        .stat-icon.revenue { background: #e8f5e9; color: #4caf50; }
        .stat-icon.customers { background: #fce4ec; color: #e91e63; }
        .stat-info h3 { font-size: 1.75rem; color: #1a1a2e; }
        .stat-info p { color: #666; font-size: 0.9rem; }
        .admin-tabs { display: flex; gap: 0.5rem; margin-bottom: 1.5rem; background: white; padding: 0.5rem; border-radius: 12px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
        .tab-btn { padding: 0.75rem 1.5rem; border: none; background: none; border-radius: 8px; cursor: pointer; font-size: 0.95rem; font-weight: 500; color: #666; transition: all 0.2s; }
        .tab-btn:hover { background: #f5f5f5; }
        .tab-btn.active { background: var(--accent-color); color: white; }
        .content-section { display: none; background: white; border-radius: 16px; padding: 1.5rem; box-shadow: 0 2px 12px rgba(0,0,0,0.06); }
        .content-section.active { display: block; }
        .section-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem; padding-bottom: 1rem; border-bottom: 1px solid #eee; }
        .section-header h2 { font-size: 1.25rem; }
        .products-table { width: 100%; border-collapse: collapse; }
        .products-table th, .products-table td { padding: 1rem; text-align: left; border-bottom: 1px solid #eee; }
        .products-table th { font-weight: 600; color: #666; font-size: 0.85rem; text-transform: uppercase; }
        .product-image { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; }
        .status-badge { padding: 0.35rem 0.75rem; border-radius: 20px; font-size: 0.8rem; font-weight: 500; }
        .status-active { background: #e8f5e9; color: #4caf50; }
        .status-inactive { background: #ffebee; color: #f44336; }
        .status-pending { background: #fff3e0; color: #ff9800; }
        .status-confirmed { background: #e1f5fe; color: #0277bd; }
        .status-processing { background: #e3f2fd; color: #2196f3; }
        .status-shipped { background: #e8f5e9; color: #4caf50; }
        .status-delivered { background: #c8e6c9; color: #1b5e20; }
        .status-cancelled { background: #ffebee; color: #c62828; }
        .status-refunded { background: #f3e5f5; color: #7b1fa2; }
        .action-btns { display: flex; gap: 0.5rem; }
        .action-btns button { padding: 0.5rem; border: none; background: #f5f5f5; border-radius: 6px; cursor: pointer; color: #666; }
        .action-btns button:hover { background: #e0e0e0; }
        .action-btns button.delete:hover { background: #ffebee; color: #f44336; }
        .orders-list { display: flex; flex-direction: column; gap: 1rem; }
        .order-card { display: grid; grid-template-columns: 2fr 1fr 1fr 1fr auto; gap: 1rem; padding: 1rem; background: #f8f9fa; border-radius: 10px; align-items: center; }
        @media (max-width: 900px) { .order-card { grid-template-columns: 1fr 1fr; } }
        .order-card h4 { font-size: 0.95rem; margin-bottom: 0.25rem; }
        .order-card p { font-size: 0.85rem; color: #666; margin: 0; }
    </style>
</head>
<body>
    <div class="admin-main">
        <div class="page-header">
            <div>
                <h1>Admin Dashboard</h1>
                <p>Manage your store</p>
            </div>
            <div>
                <a href="/" class="btn btn-outline">Back to Store</a>
                <button class="btn btn-outline" onclick="logout()">Logout</button>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon products"><i class="fas fa-box"></i></div>
                <div class="stat-info">
                    <h3 id="stat-products"><%= typeof dashboardData !== 'undefined' && dashboardData.productsCount ? dashboardData.productsCount : 0 %></h3>
                    <p>Products</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon orders"><i class="fas fa-shopping-bag"></i></div>
                <div class="stat-info">
                    <h3 id="stat-orders"><%= typeof dashboardData !== 'undefined' && dashboardData.ordersCount ? dashboardData.ordersCount : 0 %></h3>
                    <p>Orders</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon revenue"><i class="fas fa-dollar-sign"></i></div>
                <div class="stat-info">
                    <h3 id="stat-revenue">EGP <%= typeof dashboardData !== 'undefined' && dashboardData.revenue ? dashboardData.revenue.toFixed(2) : '0.00' %></h3>
                    <p>Revenue</p>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon customers"><i class="fas fa-users"></i></div>
                <div class="stat-info">
                    <h3 id="stat-customers"><%= typeof dashboardData !== 'undefined' && dashboardData.usersCount ? dashboardData.usersCount : 0 %></h3>
                    <p>Customers</p>
                </div>
            </div>
        </div>
        
        <div class="admin-tabs">
            <button class="tab-btn active" data-tab="dashboard">Dashboard</button>
            <button class="tab-btn" data-tab="products">Products</button>
            <button class="tab-btn" data-tab="orders">Orders</button>
            <button class="tab-btn" data-tab="users">Users</button>
        </div>
        
        <div class="content-section active" id="dashboard-tab">
            <div class="section-header">
                <h2>Recent Activity</h2>
            </div>
            <p>Dashboard overview content goes here</p>
        </div>
        
        <div class="content-section" id="products-tab">
            <div class="section-header">
                <h2>Products</h2>
                <button class="btn btn-primary" onclick="showAddProductForm()">Add Product</button>
            </div>
            <div id="products-table-container">
                <!-- Products will be loaded via AJAX -->
            </div>
        </div>
        
        <div class="content-section" id="orders-tab">
            <div class="section-header">
                <h2>Orders</h2>
            </div>
            <div id="orders-list-container">
                <!-- Orders will be loaded via AJAX -->
            </div>
        </div>
        
        <div class="content-section" id="users-tab">
            <div class="section-header">
                <h2>Users</h2>
            </div>
            <div id="users-table-container">
                <!-- Users will be loaded via AJAX -->
            </div>
        </div>
    </div>
    
    <!-- Admin forms and modals will be loaded via AJAX -->
    
    <script src="/js/api.js"></script>
    <script src="/js/data.js"></script>
    <script src="/js/main.js"></script>
    <script>
        // Admin page JavaScript - keep AJAX for all admin operations
        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
                this.classList.add('active');
                document.getElementById(this.dataset.tab + '-tab').classList.add('active');
                
                // Load data for the active tab
                if (this.dataset.tab === 'products' && typeof loadDashboardData === 'function') {
                    loadDashboardData();
                } else if (this.dataset.tab === 'orders' && typeof loadOrders === 'function') {
                    loadOrders();
                } else if (this.dataset.tab === 'users' && typeof loadUsers === 'function') {
                    loadUsers();
                }
            });
        });
        
        function logout() {
            if (typeof AuthAPI !== 'undefined') {
                AuthAPI.logout().then(() => {
                    window.location.href = '/';
                });
            }
        }
        
        // Initialize admin page
        if (typeof loadDashboardData === 'function') {
            loadDashboardData();
        }
    </script>
</body>
</html>

